---
title: C++设计模式
date: 2021-02-22 10:25:20
tags:
categories:
---

# P1. 设计模式简介

- 设计模式：“每一个模式描述了一个在我们周围不断重复发生的问题，以及该问题的解决方案的核心。这样，你就能一次又一次地使用该方案而不必做重复劳动。"——Christopher Alexander

- 软件设计的金科玉律 ——复用

- 各种因素的变化造成软件设计十分复杂,常见做法有分解和抽象。

  - 分解: 将将大问题分解为多个小问题，将复杂问题分解为多个简单问题

  - 抽象: 忽视非本质细节，处理泛化和理想化的对象模型

  - 举例：假设需要实现一个画布，需要划出直线和矩形
    - 按照分解的思路，需要写出`Line`和`Rect`两个类，再在画布上进行绘制
    - 按照抽象的思路，`Line`和`Rect`两个类继承自抽象类`Shape`，通过override虚函数实现`draw()`自身的绘制，画布上`Shape`类的多态调用`draw()`即可。
  
  - 就现在的情况看，两种写法并没有什么差别，但当需要增加`Circle`类时，
    - 分解法不仅要新增`Circle`类，还要在画布上新增绘制函数
    - 抽象法只需新增`Circle`类即可
    - 分解法改动地方多，因此需要编译多个文件，抽象法只需编译新增的文件即可
